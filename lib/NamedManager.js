// Generated by CoffeeScript 1.10.0
(function() {
  var $, EventEmitter, Named, NamedManager,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Named = require("./Named");

  EventEmitter = require("eventemitter3");

  $ = window["jQuery"] || require("jquery");

  NamedManager = (function(superClass) {
    extend(NamedManager, superClass);

    function NamedManager() {
      NamedManager.__super__.constructor.call(this);
      this.element = document.createElement("div");
      this.namedies = [];
      this.destructors = [];
      this.initDOMStructure();
      this.initStyle();
      this.initEventListener();
    }

    NamedManager.prototype.initDOMStructure = function() {
      this.$namedMgr = $(this.element).addClass("namedMgr");
    };

    NamedManager.prototype.initStyle = function() {
      var $style;
      this.$namedMgr.css({
        bottom: "0px",
        right: "0px",
        position: "fixed"
      });
      $style = $("<style scoped />").text(".scope {\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  pointer-events: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n.surface {\n  user-select: none;\n}\n.surface canvas {\n  user-select: none;\n  pointer-events: auto;\n}\n.blimp {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  pointer-events: auto;\n}\n.blimpCanvas {\n  user-select: none;\n}\n/*!\n * jQuery contextMenu - Plugin for simple contextMenu handling\n *\n * Version: v1.10.3\n *\n * Authors: BjÃ¶rn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)\n * Web: http://swisnl.github.io/jQuery-contextMenu/\n *\n * Copyright (c) 2011-2015 SWIS BV and contributors\n *\n * Licensed under\n *   MIT License http://www.opensource.org/licenses/mit-license\n\n * Date: 2015-12-03T20:12:18.263Z\n */.context-menu-list{position:absolute;display:inline-block;min-width:120px;max-width:250px;padding:0;margin:0;font-family:Verdana,Arial,Helvetica,sans-serif;font-size:11px;list-style-type:none;background:#eee;border:1px solid #ddd;-webkit-box-shadow:0 2px 5px rgba(0,0,0,.5);box-shadow:0 2px 5px rgba(0,0,0,.5)}.context-menu-item{position:relative;padding:2px 2px 2px 24px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#eee}.context-menu-separator{padding-bottom:0;border-bottom:1px solid #ddd}.context-menu-item>label>input,.context-menu-item>label>textarea{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.context-menu-item.hover{cursor:pointer;background-color:#39f}.context-menu-item.disabled{color:#666}.context-menu-input.hover,.context-menu-item.disabled.hover{cursor:default;background-color:#eee}.context-menu-submenu:after{position:absolute;top:0;right:3px;z-index:1;color:#666;content:\">\"}.context-menu-item.icon{min-height:18px;list-style-type:none;background-repeat:no-repeat;background-position:4px 2px}.context-menu-item.icon-edit{background-image:url(images/page_white_edit.png)}.context-menu-item.icon-cut{background-image:url(images/cut.png)}.context-menu-item.icon-copy{background-image:url(images/page_white_copy.png)}.context-menu-item.icon-paste{background-image:url(images/page_white_paste.png)}.context-menu-item.icon-delete{background-image:url(images/page_white_delete.png)}.context-menu-item.icon-add{background-image:url(images/page_white_add.png)}.context-menu-item.icon-quit{background-image:url(images/door.png)}.context-menu-input>label>*{vertical-align:top}.context-menu-input>label>input[type=checkbox],.context-menu-input>label>input[type=radio]{margin-left:-17px}.context-menu-input>label>span{margin-left:5px}.context-menu-input>label,.context-menu-input>label>input[type=text],.context-menu-input>label>select,.context-menu-input>label>textarea{display:block;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.context-menu-input>label>textarea{height:100px}.context-menu-item>.context-menu-list{top:5px;right:-5px;display:none}.context-menu-item.visible>.context-menu-list{display:block}.context-menu-accesskey{text-decoration:underline}\n/*# sourceMappingURL=jquery.contextMenu.min.css.map */").appendTo(this.$namedMgr);
    };

    NamedManager.prototype.initEventListener = function() {};

    NamedManager.prototype.destructor = function() {
      this.namedies.forEach(function(named) {
        return named.destructor();
      });
      this.namedies = [];
      this.destructors.forEach(function(fn) {
        return fn();
      });
      this.$namedMgr.children().remove();
      this.$namedMgr.remove();
    };

    NamedManager.prototype.materialize = function(shell, balloon) {
      var named, namedId;
      namedId = this.namedies.length;
      named = new Named(namedId, shell, balloon, this);
      this.namedies.push(named);
      this.$namedMgr.append(named.element);
      return namedId;
    };

    NamedManager.prototype.vanish = function(namedId) {
      if (this.namedies[namedId] == null) {
        console.error("namedId " + namedId + " is not used yet");
      }
      this.namedies[namedId].destructor();
      this.namedies[namedId] = null;
      delete this.namedies[namedId];
    };

    NamedManager.prototype.named = function(namedId) {
      if (this.namedies[namedId] == null) {
        console.error("namedId " + namedId + " is not used yet");
        return null;
      }
      return this.namedies[namedId];
    };

    return NamedManager;

  })(EventEmitter);

  module.exports = NamedManager;

}).call(this);
